on: workflow_dispatch

jobs:
  # firebase_deploy_android:
  #   name: Deploy Android APP to firebase
  #   runs-on: ubuntu-latest
  #   steps:
  #     - uses: actions/checkout@v2
  #     - uses: ruby/setup-ruby@v1
  #       with:
  #         ruby-version: 2.6
  #     - name: Install bundle
  #       run: |
  #         cd android/fastlane
  #         bundle config path vendor/bundle
  #         bundle install --jobs 4 --retry 3
  #     - name: Distribute app with ðŸ”¥ App Distribution ðŸš€
  #       run: |
  #         cd android/fastlane
  #         bundle exec fastlane profile_firebase_distribution DEV_FIREBASE_APP_ID:${{ secrets.DEV_FIREBASE_APP_ID }}
  deploy:
    runs-on: macos-latest
    steps:
    - uses: actions/checkout@v2
#     - uses: actions/setup-java@v1
#       with:
#         java-version: '12.x'
    - uses: subosito/flutter-action@v1
      with:
        flutter-version: '1.22.6'
#     - name: Build app
#       run: |
#         cd github_actions
#         flutter build ios --profile
#         cd build/ios/iphoneos
#         mkdir Payload
#         mv Runner.app Payload
#         zip -r Payload.zip Payload
#         mv Payload.zip Payload.ipa
    - name: Install bundle
      run: |
        cd github_actions/ios/fastlane
        bundle config path vendor/bundle
        bundle install --jobs 4 --retry 3
    - name: Distribute app with ðŸ”¥ App Distribution ðŸš€
      run: |
        cd github_actions/ios/fastlane
        bundle exec fastlane profile_firebase_distribution DEV_FIREBASE_APP_ID:123:123:123
#   firebase_deploy_ios:
#     name: Deploy iOS APP to firebase
#     runs-on: macos-latest
#     steps:
#     - uses: actions/checkout@v1
#     - uses: actions/setup-java@v1
#       with:
#         java-version: '12.x'
#     - name: Distribute app with ðŸ”¥ App Distribution ðŸš€
#       run: |
#         bundle exec fastlane profile_firebase_distribution DEV_FIREBASE_APP_ID:123:123:123
